<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Kelas 9D - Tema Laut</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- General Styling & Theme --- */
        @keyframes float-up {
            to {
                transform: translateY(-120vh) rotate(360deg);
            }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        :root {
            --ocean-deep: #003459;
            --ocean-primary: #0077be;
            --ocean-light: #00a8cc;
            --sand: #f4f1de;
            --coral: #e07a5f;
            --white: #ffffff;
            --text-dark: #2c3e50;
            --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(180deg, var(--ocean-deep) 0%, var(--ocean-primary) 100%);
            color: var(--text-dark);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* --- Animated Background --- */
        .ocean-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            overflow: hidden;
        }

        .bubble {
            position: absolute;
            bottom: -100px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0.1) 70%);
            border-radius: 50%;
            opacity: 0.6;
            animation: float-up linear infinite;
        }

        .bubble:nth-child(1) { width: 40px; height: 40px; left: 10%; animation-duration: 15s; animation-delay: 0s; }
        .bubble:nth-child(2) { width: 20px; height: 20px; left: 20%; animation-duration: 12s; animation-delay: 1s; }
        .bubble:nth-child(3) { width: 50px; height: 50px; left: 35%; animation-duration: 18s; animation-delay: 2s; }
        .bubble:nth-child(4) { width: 25px; height: 25px; left: 50%; animation-duration: 14s; animation-delay: 0s; }
        .bubble:nth-child(5) { width: 35px; height: 35px; left: 65%; animation-duration: 16s; animation-delay: 3s; }
        .bubble:nth-child(6) { width: 45px; height: 45px; left: 80%; animation-duration: 19s; animation-delay: 1s; }
        .bubble:nth-child(7) { width: 15px; height: 15px; left: 90%; animation-duration: 11s; animation-delay: 2s; }

        /* --- Main Container --- */
        .container {
            max-width: 1100px;
            margin: 20px auto;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.18);
            animation: fadeIn 0.8s ease-out;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--ocean-light);
        }

        header h1 {
            color: var(--ocean-deep);
            margin: 0;
            font-weight: 700;
            font-size: 2.5em;
        }

        header p {
            color: var(--ocean-primary);
            margin: 5px 0 0 0;
            font-weight: 500;
        }

        /* --- Navigation --- */
        nav {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 25px;
            background-color: var(--sand);
            color: var(--ocean-deep);
            border: 2px solid transparent;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            font-family: 'Quicksand', sans-serif;
        }

        .nav-btn.active {
            background-color: var(--ocean-light);
            color: var(--white);
            transform: scale(1.05);
        }

        .nav-btn:hover:not(.active) {
            background-color: var(--coral);
            color: var(--white);
            transform: translateY(-3px);
        }

        /* --- Sections --- */
        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        h2 {
            color: var(--ocean-deep);
            border-bottom: 2px solid var(--ocean-light);
            padding-bottom: 5px;
            margin-top: 0;
        }

        /* --- Form Elements --- */
        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--ocean-primary);
        }

        input[type="date"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--ocean-light);
            border-radius: 10px;
            box-sizing: border-box;
            font-size: 14px;
            font-family: 'Quicksand', sans-serif;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            padding: 12px 25px;
            background-color: var(--ocean-primary);
            color: var(--white);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            font-family: 'Quicksand', sans-serif;
        }

        .btn:hover {
            background-color: var(--ocean-deep);
            transform: translateY(-3px);
        }

        .btn-success {
            background-color: #4CAF50; /* A nice green */
        }
        .btn-success:hover {
            background-color: #45a049;
        }

        /* --- Tables --- */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(0, 119, 190, 0.2);
        }

        th {
            background-color: rgba(0, 168, 204, 0.2);
            font-weight: 600;
            color: var(--ocean-deep);
        }

        tr:nth-child(even) {
            background-color: rgba(244, 241, 222, 0.3);
        }

        /* --- Radio & Checkbox --- */
        .radio-group, .checkbox-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .radio-group label, .checkbox-group label {
            font-weight: 500;
            color: var(--text-dark);
        }

        /* --- Dashboard Board --- */
        .board-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .summary-card {
            background: linear-gradient(135deg, var(--ocean-light), var(--ocean-primary));
            color: var(--white);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 119, 190, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .summary-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 25px rgba(0, 119, 190, 0.4);
        }

        .summary-card h3 {
            font-size: 36px;
            margin: 10px 0 0 0;
            font-weight: 700;
        }

        .summary-card p {
            margin: 0;
            font-weight: 500;
            font-size: 18px;
        }

        /* --- Utility --- */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background-color: var(--ocean-primary);
            color: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            opacity: 0;
            transition: opacity 0.5s, transform 0.5s;
            transform: translateX(100%);
            z-index: 1000;
            font-weight: 600;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(0);
            animation: slideInRight 0.5s;
        }
    </style>
</head>
<body>

    <!-- Animated Background -->
    <div class="ocean-bg">
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
    </div>

    <div class="container">
        <header>
            <h1>ðŸŒŠ Kelas 9D ðŸŒŠ</h1>
            <p>Mengarungi Samudra Pengetahuan Bersama</p>
        </header>

        <nav>
            <button class="nav-btn active" data-target="board-section">Board</button>
            <button class="nav-btn" data-target="absensi-section">Absen</button>
            <button class="nav-btn" data-target="jurnal-section">Jurnal</button>
            <button class="nav-btn" data-target="kas-section">Kas</button>
        </nav>

        <main>
            <!-- Board Section -->
            <section id="board-section" class="content-section active">
                <h2>Dashboard Kelas</h2>
                <div class="board-grid">
                    <div class="summary-card">
                        <p>Jumlah Hadir</p>
                        <h3 id="total-hadir">0</h3>
                    </div>
                    <div class="summary-card">
                        <p>Jumlah Sakit</p>
                        <h3 id="total-sakit">0</h3>
                    </div>
                    <div class="summary-card">
                        <p>Jumlah Izin</p>
                        <h3 id="total-izin">0</h3>
                    </div>
                    <div class="summary-card">
                        <p>Jumlah Alpa</p>
                        <h3 id="total-alpa">0</h3>
                    </div>
                    <div class="summary-card">
                        <p>Total Kas</p>
                        <h3 id="total-kas-bulanan">Rp 0</h3>
                    </div>
                </div>
            </section>

            <!-- Absensi Section -->
            <section id="absensi-section" class="content-section">
                <h2>Absensi Siswa</h2>
                <div class="form-group">
                    <label for="absen-date">Pilih Tanggal:</label>
                    <input type="date" id="absen-date">
                </div>
                <table id="absensi-table">
                    <thead>
                        <tr>
                            <th>Nama Siswa</th>
                            <th>Hadir</th>
                            <th>Izin</th>
                            <th>Sakit</th>
                            <th>Alpa</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Will be populated by JS -->
                    </tbody>
                </table>
                <button class="btn btn-success" onclick="saveAttendance()" style="margin-top: 20px;">Simpan Absensi</button>
            </section>

            <!-- Jurnal Section -->
            <section id="jurnal-section" class="content-section">
                <h2>Jurnal Kegiatan Pelajaran</h2>
                <div class="form-group">
                    <label for="jurnal-date">Pilih Tanggal:</label>
                    <input type="date" id="jurnal-date">
                </div>
                <div class="form-group">
                    <label for="jurnal-content">Isi Jurnal:</label>
                    <textarea id="jurnal-content" placeholder="Tuliskan kegiatan pelajaran hari ini..."></textarea>
                </div>
                <button class="btn btn-success" onclick="saveJournal()">Simpan Jurnal</button>
            </section>

            <!-- Kas Section -->
            <section id="kas-section" class="content-section">
                <h2>Manajemen Kas</h2>
                
                <!-- Kas Bulanan -->
                <div style="margin-bottom: 40px;">
                    <h3>Input Kas Bulanan</h3>
                    <div class="form-group">
                        <label for="kas-bulanan-student">Pilih Siswa:</label>
                        <select id="kas-bulanan-student">
                            <!-- Will be populated by JS -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="kas-bulanan-amount">Jumlah Bayar (Rp):</label>
                        <input type="number" id="kas-bulanan-amount" placeholder="contoh: 5000">
                    </div>
                    <button class="btn btn-success" onclick="processMonthlyPayment()">Bayar</button>
                </div>

                <hr>

                <!-- Kas Harian -->
                <div>
                    <h3>Absen Kas Harian (Rp 1.000/hari)</h3>
                    <p style="color: #666; font-size: 12px;">Centang akan otomatis terisi jika siswa memiliki kredit dari kas bulanan. Sabtu/Minggu libur.</p>
                    <div class="form-group">
                        <label for="kas-harian-date">Pilih Tanggal:</label>
                        <input type="date" id="kas-harian-date">
                    </div>
                    <table id="kas-harian-table">
                        <thead>
                            <tr>
                                <th>Nama Siswa</th>
                                <th>Bayar Kas Harian</th>
                                <th>Sisa Kredit Bulanan</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Will be populated by JS -->
                        </tbody>
                    </table>
                    <button class="btn btn-success" onclick="saveDailyKas()" style="margin-top: 20px;">Simpan Kas Harian</button>
                </div>
            </section>
        </main>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        // --- DATA & INITIALIZATION ---
        const students = [
            'Agung Ramaindra Syahputra', 'Ainun Tiyas Martiningsih', 'Alessia Alzena Riangga', 'Almaira Faiqha', 'Alya Faliha',
            'Amirah Julveni Maulana', 'Andi Aqil', 'Aurora Felicia Angelie', 'Bilqis Melani', 'Chaya Muja Syatira',
            'Fadhil Oktavian Nabil', 'Fahmi Firjatullah', 'Faiz Alfarizi', 'Farhan Umaydillah Rajiansyah', 'Fathir Pradipta Alfarizi',
            'Fazril Nizart', 'Januari', 'Jihaan Kaltsum Khairunnisa', 'Juan Edra Abiya', 'Khanza Rista Bhanuwati',
            'Kristiana Berta', 'Marselino Prasetyo Wijaya', 'M. Fadil Putra Pratama', 'M. Kafka Adri Al-Maliq', 'M. Luthfi Faturrahman',
            'Natalis Fedora Purba', 'Rafif Rakha Arkana', 'Rayhan Qolbu', 'Runika Alzariva', 'Suci Pratiwi',
            'Syafa Damia Sakhi', 'Syech Faris Maulana', 'Tegar Tri Pambudi', 'Tersa Usela', 'Tiara Husna Humairah',
            'Zhafira Mayarista'
        ];

        const KAS_HARIAN = 1000;

        function initializeData() {
            let data = localStorage.getItem('class9D_data');
            if (!data) {
                const initialData = {
                    attendance: {},
                    journal: {},
                    kas: {}
                };
                students.forEach(student => {
                    initialData.kas[student] = {
                        monthlyPaid: 0,
                        credits: 0
                    };
                });
                localStorage.setItem('class9D_data', JSON.stringify(initialData));
                return initialData;
            }
            return JSON.parse(data);
        }

        let classData = initializeData();

        // --- UTILITY FUNCTIONS ---
        function saveToLocalStorage() {
            localStorage.setItem('class9D_data', JSON.stringify(classData));
        }

        function showNotification(message, duration = 3000) {
            const notificationEl = document.getElementById('notification');
            notificationEl.textContent = message;
            notificationEl.classList.add('show');
            setTimeout(() => {
                notificationEl.classList.remove('show');
            }, duration);
        }

        function formatDate(date) {
            const d = new Date(date);
            const year = d.getFullYear();
            const month = String(d.getMonth() + 1).padStart(2, '0');
            const day = String(d.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        function isWeekend(dateString) {
            const d = new Date(dateString + "T00:00:00");
            const day = d.getDay();
            return day === 0 || day === 6;
        }

        // --- NAVIGATION ---
        document.querySelectorAll('.nav-btn').forEach(button => {
            button.addEventListener('click', () => {
                const targetId = button.getAttribute('data-target');
                
                document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                
                document.getElementById(targetId).classList.add('active');
                button.classList.add('active');

                if (targetId === 'board-section') renderBoard();
                if (targetId === 'absensi-section') renderAttendanceTable();
                if (targetId === 'jurnal-section') renderJournal();
                if (targetId === 'kas-section') {
                    renderKasBulananOptions();
                    renderKasHarianTable();
                }
            });
        });

        // --- RENDER FUNCTIONS ---
        function renderBoard() {
            let totalHadir = 0, totalSakit = 0, totalIzin = 0, totalAlpa = 0;
            const allAttendanceData = Object.values(classData.attendance);

            allAttendanceData.forEach(dayData => {
                Object.values(dayData).forEach(status => {
                    if (status === 'hadir') totalHadir++;
                    else if (status === 'sakit') totalSakit++;
                    else if (status === 'izin') totalIzin++;
                    else if (status === 'alpa') totalAlpa++;
                });
            });

            const totalKasBulanan = Object.values(classData.kas).reduce((sum, student) => sum + student.monthlyPaid, 0);

            document.getElementById('total-hadir').textContent = totalHadir;
            document.getElementById('total-sakit').textContent = totalSakit;
            document.getElementById('total-izin').textContent = totalIzin;
            document.getElementById('total-alpa').textContent = totalAlpa;
            document.getElementById('total-kas-bulanan').textContent = `Rp ${totalKasBulanan.toLocaleString('id-ID')}`;
        }

        function renderAttendanceTable() {
            const date = document.getElementById('absen-date').value ||
